<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" namespace="/" extends="struts-default">
        <interceptors>
            <interceptor name="authentication" class="com.aptech.interceptor.AuthenticationInterceptor"></interceptor>
            <interceptor-stack name="authStack">
                <interceptor-ref name="authentication"></interceptor-ref>
                <interceptor-ref name="defaultStack"></interceptor-ref>
            </interceptor-stack>    
        </interceptors>
        
        <default-interceptor-ref name="authStack"></default-interceptor-ref>
      
        <global-results>
            <result name="login" type="redirect">/admin/home</result>
        </global-results>
        
        <action name="store" class="com.aptech.action.StoreAction" method="pagingProduct">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/WEB-INF/front-store/store.jsp</result>
        </action>
        <action name="search" class="com.aptech.action.StoreAction" method="search">
            <result name="success">/WEB-INF/front-store/result.jsp</result>
        </action>
        <action name="header" class="com.aptech.action.StoreAction" method="header">
            <result name="success">/template/header.jsp</result>
        </action>
        <action name="sidebar" class="com.aptech.action.StoreAction" method="sidebar">
            <result name="success">/template/sidebar.jsp</result>
        </action>
        <action name="product" class="com.aptech.action.ProductAction">
            <result name="success">/WEB-INF/front-store/product.jsp</result>
        </action>
        <action name="category" class="com.aptech.action.CategoryAction" method="categoryPaging">
            <result name="success">/WEB-INF/front-store/category.jsp</result>
        </action>
        <action name="buy" class="com.aptech.action.StoreAction" method="buy">
            <result name="success" type="redirect">cart</result> 
        </action>
        <action name="cart" class="com.aptech.action.StoreAction" method="cart">
            <result name="success">/WEB-INF/front-store/view-cart.jsp</result> 
        </action>
    </package>
 
    <package name="admin" namespace="/admin" extends="default">
        
        <action name="home">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result>/WEB-INF/admin/login.jsp</result>
        </action>
        
        <action name="index" class="com.aptech.action.AdminAction">
            <result name="success">/WEB-INF/admin/index.jsp</result>
        </action>
            
        <action name="login" class="com.aptech.action.LoginAction">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success" type="redirect">/admin/index</result>
            <result name="input">/WEB-INF/admin/login.jsp</result>
        </action>
        
        <action name="header" class="com.aptech.action.AdminAction" method="header">
            <result name="success">/template/admin_header.jsp</result>
        </action>
        
        <action name="sidebar" class="com.aptech.action.AdminAction" method="sidebar">
            <result name="success">/template/admin_sidebar.jsp</result>
        </action>
    </package>
    
    <package name="category" namespace="/admin/category" extends="admin">
        <action name="index" class="com.aptech.action.CategoryAction" method="index">
            <result name="success">/WEB-INF/admin/category/index.jsp</result>
        </action>
        
        <action name="insert" class="com.aptech.action.CategoryAction" method="insert">
            <result name="success">/WEB-INF/admin/category/forms.jsp</result>
        </action>
        
        <action name="delete" class="com.aptech.action.CategoryAction" method="delete">
            <result name="success" type="redirect">/admin/category/index</result>
        </action>
        
        <action name="edit" class="com.aptech.action.CategoryAction" method="edit">
            <result name="success">/WEB-INF/admin/category/forms.jsp</result>
        </action>
        
        <action name="save" class="com.aptech.action.CategoryAction" method="save">
            <result name="success" type="redirect">/admin/category/index</result>
        </action>
    </package>
    
    <package name="product" namespace="/admin/product" extends="admin">
        <action name="index" class="com.aptech.action.ProductAction" method="index">
            <result name="success">/WEB-INF/admin/product/index.jsp</result>
        </action>
        
        <action name="insert" class="com.aptech.action.ProductAction" method="insert">
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">2097152</param>
                <param name="allowedTypes">
                    image/png,image/gif,image/jpeg,image/pjpeg
                </param>
            </interceptor-ref>
            <interceptor-ref name="authStack"></interceptor-ref>
            <result name="success">/WEB-INF/admin/product/forms.jsp</result>
        </action>
        
        <action name="delete" class="com.aptech.action.ProductAction" method="delete">
            <result name="success" type="redirect">/admin/product/index</result>
        </action>
        
        <action name="edit" class="com.aptech.action.ProductAction" method="edit">
            <result name="success">/WEB-INF/admin/product/forms.jsp</result>
        </action>
        
        <action name="save" class="com.aptech.action.ProductAction" method="save">
            <result name="success" type="redirect">/admin/product/index</result>
        </action>
    </package>
    
    <package name="user" namespace="/admin/user" extends="admin">
        <action name="index" class="com.aptech.action.UserAction" method="index">
            <result name="success">/WEB-INF/admin/user/index.jsp</result>
        </action>
        
        <action name="insert" class="com.aptech.action.UserAction" method="insert">
            <result name="success">/WEB-INF/admin/user/forms.jsp</result>
        </action>
        
        <action name="delete" class="com.aptech.action.UserAction" method="delete">
            <result name="success" type="redirect">/admin/user/index</result>
        </action>
        
        <action name="edit" class="com.aptech.action.UserAction" method="edit">
            <result name="success">/WEB-INF/admin/user/forms.jsp</result>
        </action>
        
        <action name="save" class="com.aptech.action.UserAction" method="save">
            <result name="success" type="redirect">/admin/user/index</result>
        </action>
    </package>
    
    <package name="role" namespace="/admin/role" extends="admin">
        <action name="index" class="com.aptech.action.RoleAction" method="index">
            <result name="success">/WEB-INF/admin/role/index.jsp</result>
        </action>
        
        <action name="insert" class="com.aptech.action.RoleAction" method="insert">
            <result name="success">/WEB-INF/admin/role/forms.jsp</result>
        </action>
        
        <action name="delete" class="com.aptech.action.RoleAction" method="delete">
            <result name="success" type="redirect">/admin/role/index</result>
        </action>
        
        <action name="edit" class="com.aptech.action.RoleAction" method="edit">
            <result name="success">/WEB-INF/admin/role/forms.jsp</result>
        </action>
        
        <action name="save" class="com.aptech.action.RoleAction" method="save">
            <result name="success" type="redirect">/admin/role/index</result>
        </action>
    </package>
    
    
</struts>

