<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" namespace="/" extends="struts-default">
        <action name="store" class="com.aptech.action.StoreAction" method="pagingProduct">
            <result name="success">/WEB-INF/front-store/store.jsp</result>
        </action>
        <action name="search" class="com.aptech.action.StoreAction" method="search">
            <result name="success">/WEB-INF/front-store/result.jsp</result>
        </action>
        <action name="header" class="com.aptech.action.StoreAction" method="header">
            <result name="success">/template/header.jsp</result>
        </action>
        <action name="sidebar" class="com.aptech.action.StoreAction" method="sidebar">
            <result name="success">/template/sidebar.jsp</result>
        </action>
        <action name="product" class="com.aptech.action.ProductAction">
            <result name="success">/WEB-INF/front-store/product.jsp</result>
        </action>
        <action name="category" class="com.aptech.action.CategoryAction" method="categoryPaging">
            <result name="success">/WEB-INF/front-store/category.jsp</result>
        </action>
        <action name="buy" class="com.aptech.action.CartAction">
            <result name="success" type="redirect">cart</result> 
        </action>
        <action name="cart" class="com.aptech.action.ViewCartAction">
            <result name="success">/WEB-INF/front-store/view-cart.jsp</result> 
        </action>
        
        <action name="userImage"
                class="com.aptech.action.FileUploadAction">
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">2097152</param>
                <param name="allowedTypes">
                    image/png,image/gif,image/jpeg,image/pjpeg
                </param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/WEB-INF/front-store/SuccessUserImage.jsp</result>
            <result name="input">/WEB-INF/front-store/UserImage.jsp</result>
        </action>
    </package>
 
    <package name="admin" namespace="/admin" extends="struts-default">
        <interceptors>
            <interceptor name="authentication" class="com.aptech.interceptor.AuthenticationInterceptor"></interceptor>
            <interceptor-stack name="authStack">
                <interceptor-ref name="authentication"></interceptor-ref>
            </interceptor-stack>    
        </interceptors>
        
        <default-interceptor-ref name="authStack"></default-interceptor-ref>
      
        <global-results>
            <result name="login" type="redirect">/admin/home</result>
        </global-results>

        <action name="home">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result>/WEB-INF/admin/login.jsp</result>
        </action>

        <action name="login" class="com.aptech.action.LoginAction">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success" >/WEB-INF/admin/tables.jsp</result>
            <result name="input">/WEB-INF/admin/login.jsp</result>
        </action>
        
        <action name="welcome" class="com.aptech.action.AdminAction">
            <result name="success">/WEB-INF/admin/tables.jsp</result>
        </action>
        
        <action name="header" class="com.aptech.action.AdminAction" method="header">
            <result name="success">/template/admin_header.jsp</result>
        </action>
    </package>
</struts>

